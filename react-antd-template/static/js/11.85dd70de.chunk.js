(this["webpackJsonpreact-antd-template"]=this["webpackJsonpreact-antd-template"]||[]).push([[11],{316:function(e,t,n){"use strict";n(0);var r=n(6);t.a=function(e){var t=e.className,n=void 0===t?"":t;return Object(r.jsx)("main",{className:"content-main ".concat(n),children:e.children})}},324:function(e,t,n){"use strict";var r=n(17),a=n(22),c=n(387),u=n(0),s=n(6);t.a=function(e){var t=Object(u.useState)(),n=Object(a.a)(t,2),i=n[0],o=n[1];return Object(u.useEffect)((function(){e.pagination&&o(Object(r.a)(Object(r.a)({},e.pagination),{},{showQuickJumper:!0,showTotal:function(){return e.pagination&&"\u5171 ".concat(String(e.pagination.total||0)," \u6761")}}))}),[e.pagination]),Object(s.jsx)(c.a,Object(r.a)(Object(r.a)({},e),{},{pagination:i}))}},394:function(e,t,n){"use strict";n.r(t);var r=n(25),a=n.n(r),c=n(17),u=n(38),s=n(22),i=n(0),o=n(308),j=n(310),l=n(64),b=n(143),O=n(130),d=n(55),f=n(344),p=n(6),m=f.a.Option,x=!1,h=function(e){var t=e.className,n=void 0===t?"":t,r=e.value,c=e.onChange,o=Object(i.useState)([]),j=Object(s.a)(o,2),l=j[0],b=j[1],h=Object(i.useState)(!1),v=Object(s.a)(h,2),k=v[0],g=v[1],w=function(){var e=Object(u.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.next=5,Object(O.h)();case 5:if(t=e.sent,!x){e.next=8;break}return e.abrupt("return");case 8:g(!1),200!=t.code&&d.a.error(t.message||"\u83b7\u53d6\u6570\u636e\u5931\u8d25\uff01"),b(t.data),void 0===r&&c&&c(t.data[0].value);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return x=!1,w(),function(){x=!0}}),[]),Object(p.jsx)(f.a,{className:n,loading:k,value:r,onChange:c,placeholder:"\u8bf7\u9009\u62e9",children:l.map((function(e,t){return Object(p.jsx)(m,{value:e.value,children:e.text},"".concat(e.value,"-").concat(t))}))})},v=n(391),k={labelCol:{span:5},wrapperCol:{span:19}},g=function(){var e=Object(i.useRef)(!1),t=Object(i.useState)(e.current),n=Object(s.a)(t,2)[1],r=Object(i.useRef)((function(t){return Object(p.jsx)(l.a,{type:"primary",onClick:function(){n(e.current=!e.current)},children:t.children})})),j=o.a.useForm(),f=Object(s.a)(j,1)[0],m=Object(i.useRef)((function(t){var r=t.onOk,j=Object(i.useState)(!1),l=Object(s.a)(j,2),m=l[0],x=l[1];return Object(p.jsx)(v.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:e.current,confirmLoading:m,onCancel:function(){n(e.current=!1)},onOk:Object(u.a)(a.a.mark((function t(){var c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.validateFields().catch((function(){}));case 2:if((c=t.sent)&&!m){t.next=5;break}return t.abrupt("return");case 5:return x(!0),t.next=8,Object(O.j)(c);case 8:if(u=t.sent,x(!1),200==u.code){t.next=12;break}return t.abrupt("return",d.a.error(u.message||"\u6dfb\u52a0\u5931\u8d25\uff01"));case 12:d.a.success(u.message||"\u6dfb\u52a0\u6210\u529f\uff01"),n(e.current=!1),r&&r();case 15:case"end":return t.stop()}}),t)}))),children:Object(p.jsxs)(o.a,Object(c.a)(Object(c.a)({form:f},k),{},{children:[Object(p.jsx)(o.a.Item,{name:"username",label:"\u7528\u6237\u540d\u79f0",rules:[{required:!0}],children:Object(p.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"})}),Object(p.jsx)(o.a.Item,{name:"roleId",label:"\u6240\u5c5e\u89d2\u8272",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u89d2\u8272"}],children:Object(p.jsx)(h,{})})]}))})}));return{Button:r.current,Modal:m.current}},w=n(316),y={labelCol:{span:5},wrapperCol:{span:19}},S=function(){var e=Object(i.useRef)(!1),t=Object(i.useRef)(),n=Object(i.useState)(e.current),r=Object(s.a)(n,2)[1],j=Object(i.useRef)((function(n){return Object(p.jsx)(l.a,{type:"primary",onClick:function(){var a=n.item;r(e.current=!e.current),t.current=a,m.setFieldsValue({username:a.username,roleId:a.roleId})},children:n.children})})),f=o.a.useForm(),m=Object(s.a)(f,1)[0],x=Object(i.useRef)((function(n){var j=n.onOk,l=Object(i.useState)(!1),f=Object(s.a)(l,2),x=f[0],k=f[1];return Object(p.jsx)(v.a,{title:"\u7f16\u8f91\u7528\u6237",visible:e.current,confirmLoading:x,onCancel:function(){r(e.current=!1)},onOk:Object(u.a)(a.a.mark((function n(){var u,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.validateFields().catch((function(){}));case 2:if((u=n.sent)&&!x&&t.current){n.next=5;break}return n.abrupt("return");case 5:return k(!0),n.next=8,Object(O.m)(Object(c.a)({id:Number(t.current.id)},u));case 8:if(s=n.sent,k(!1),200==s.code){n.next=12;break}return n.abrupt("return",d.a.error(s.message||"\u66f4\u65b0\u5931\u8d25\uff01"));case 12:d.a.success(s.message||"\u66f4\u65b0\u6210\u529f\uff01"),r(e.current=!1),j&&j();case 15:case"end":return n.stop()}}),n)}))),children:Object(p.jsxs)(o.a,Object(c.a)(Object(c.a)({form:m},y),{},{children:[Object(p.jsx)(o.a.Item,{name:"username",label:"\u7528\u6237\u540d\u79f0",rules:[{required:!0}],children:Object(p.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"})}),Object(p.jsx)(o.a.Item,{name:"roleId",label:"\u6240\u5c5e\u89d2\u8272",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u89d2\u8272"}],children:Object(p.jsx)(h,{})})]}))})}));return{Button:j.current,Modal:x.current}},C=n(324),I=n(96),F=!1;t.default=function(e){Object(i.useEffect)((function(){return F=!1,function(){F=!0}}),[]);var t=e.className,n=void 0===t?"":t,r=Object(i.useState)({list:[],total:0}),f=Object(s.a)(r,2),m=f[0],x=f[1],h=Object(i.useState)(!1),v=Object(s.a)(h,2),k=v[0],y=v[1],N=function(){var e=Object(u.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.validateFields().catch((function(){}));case 2:if(t=e.sent,!k&&t){e.next=5;break}return e.abrupt("return");case 5:return y(!0),e.next=8,Object(O.l)(Object(c.a)(Object(c.a)({},B),t));case 8:if(n=e.sent,!F){e.next=11;break}return e.abrupt("return");case 11:if(y(!1),200==n.code){e.next=14;break}return e.abrupt("return",d.a.error(n.message||"\u52a0\u8f7d\u6570\u636e\u5931\u8d25\uff01"));case 14:n.data.list=n.data.list.map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{sn:Object(I.b)(B,t)})})),x({list:n.data.list,total:n.data.total});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Object(i.useState)({current:1,pageSize:10}),q=Object(s.a)(R,2),B=q[0],E=q[1];Object(i.useEffect)((function(){N()}),[B]);var M=o.a.useForm(),z=Object(s.a)(M,1)[0],J=g(),T=S(),L=[{key:"sn",title:"\u5e8f\u53f7",width:100},{key:"username",title:"\u7528\u6237\u540d\u79f0"},{key:"roleName",title:"\u6240\u5c5e\u89d2\u8272"},{key:"actions",dataIndex:"actions",title:"\u64cd\u4f5c",width:300,render:function(e,t){return Object(p.jsx)(j.b,{children:Object(p.jsx)(T.Button,{item:t,children:"\u7f16\u8f91"})})}}];return L=L.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{align:"center",dataIndex:e.key})})),Object(p.jsxs)(w.a,{className:n,children:[Object(p.jsxs)("header",{children:[Object(p.jsxs)(o.a,{layout:"inline",form:z,children:[Object(p.jsx)(o.a.Item,{label:"\u7528\u6237\u540d\u79f0",name:"username",children:Object(p.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"})}),Object(p.jsx)(o.a.Item,{children:Object(p.jsxs)(j.b,{children:[Object(p.jsx)(l.a,{type:"primary",onClick:function(){if(1==B.current)return N();E(Object(c.a)(Object(c.a)({},B),{},{current:1}))},children:"\u67e5\u8be2"}),Object(p.jsx)(l.a,{onClick:function(){z.resetFields(),N()},children:"\u91cd\u7f6e"})]})})]}),Object(p.jsx)("nav",{style:{marginTop:10},children:Object(p.jsx)(J.Button,{children:"\u6dfb\u52a0\u89d2\u8272"})})]}),Object(p.jsx)(C.a,{dataSource:m.list,columns:L,rowKey:"id",style:{marginTop:10},loading:k,pagination:{total:m.total},onChange:function(e){var t=e.current,n=e.pageSize;E({current:t,pageSize:n})}}),Object(p.jsx)(J.Modal,{onOk:function(){N()}}),Object(p.jsx)(T.Modal,{onOk:function(){N()}})]})}}}]);
//# sourceMappingURL=11.85dd70de.chunk.js.map