{"version":3,"sources":["console-layout/content-main.tsx","components/app-table.tsx","../node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","../node_modules/@ant-design/icons/es/icons/PlusOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/StarOutlined.js","../node_modules/@ant-design/icons/es/icons/StarOutlined.js","components/hot-star.tsx","views/article-manage/list.tsx"],"names":["ContentMain","props","className","children","AppTable","useState","pagination","setPagination","useEffect","showQuickJumper","showTotal","String","total","PlusOutlined","ref","React","AntdIcon","_objectSpread","icon","PlusOutlinedSvg","displayName","StarOutlined","StarOutlinedSvg","HotStar","number","style","color","Array","fill","map","item","index","unmount","ArticleList","list","res","setRes","loading","setLoading","getList","a","form","validateFields","catch","_form","reqArticleList","page","code","appMessage","error","message","data","sn","getTableSN","current","pageSize","setPage","Form","useForm","columns","key","title","width","render","dataIndex","text","type","onClick","history","push","id","align","useHistory","layout","Item","label","name","placeholder","resetFields","marginTop","dataSource","rowKey","onChange"],"mappings":"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","file":"static/js/8.2ffbaa50.chunk.js","sourcesContent":["import React from \"react\";\r\ninterface Props {\r\n  [key: string]: any;\r\n}\r\n/**主内容区 可以统一ui 并减少一层dom */\r\nconst ContentMain: React.FC<ViewProps<Props>> = (props) => {\r\n  const { className = \"\" } = props;\r\n  //render\r\n  return <main className={`content-main ${className}`}>{props.children}</main>;\r\n};\r\nexport default ContentMain;\r\n","import { Table } from \"antd\";\r\nimport React, { useEffect, useState } from \"react\";\r\ninterface Props extends Antd.TableProps<any> {\r\n  [key: string]: any;\r\n}\r\nconst AppTable: React.FC<ViewProps<Props>> = (props) => {\r\n  const [pagination, setPagination] = useState<false | Antd.TablePaginationConfig | undefined>();\r\n  useEffect(() => {\r\n    if (!props.pagination) return;\r\n    setPagination({\r\n      ...props.pagination,\r\n      showQuickJumper: true,\r\n      showTotal: () => props.pagination && `共 ${String(props.pagination.total || 0)} 条`,\r\n    });\r\n  }, [props.pagination]);\r\n  //render\r\n  return <Table {...props} pagination={pagination}></Table>;\r\n};\r\nexport default AppTable;\r\n","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusOutlined = function PlusOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: PlusOutlinedSvg\n  }));\n};\n\nPlusOutlined.displayName = 'PlusOutlined';\nexport default /*#__PURE__*/React.forwardRef(PlusOutlined);","// This icon file is generated automatically.\nvar StarOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z\" } }] }, \"name\": \"star\", \"theme\": \"outlined\" };\nexport default StarOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport StarOutlinedSvg from \"@ant-design/icons-svg/es/asn/StarOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar StarOutlined = function StarOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: StarOutlinedSvg\n  }));\n};\n\nStarOutlined.displayName = 'StarOutlined';\nexport default /*#__PURE__*/React.forwardRef(StarOutlined);","import { StarOutlined } from \"@ant-design/icons\";\r\nimport React from \"react\";\r\ninterface Props {\r\n  [key: string]: any;\r\n  number: HotNumber;\r\n}\r\nconst HotStar: React.FC<ViewProps<Props>> = (props) => {\r\n  const { className = \"\", number = 0 } = props;\r\n  //render\r\n  return (\r\n    <div className={className} style={{ color: \"#faad14\" }}>\r\n      {Array(number)\r\n        .fill(1)\r\n        .map((item, index) => (\r\n          <StarOutlined key={index} />\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\nexport default HotStar;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, Space } from \"antd\";\r\nimport AppInput from \"@/components/app-input\";\r\nimport ContentMain from \"@/console-layout/content-main\";\r\nimport HotStar from \"@/components/hot-star\";\r\nimport AppTable from \"@/components/app-table\";\r\nimport { reqArticleList } from \"@/apis\";\r\nimport { appMessage } from \"@/plugins/antd\";\r\nimport { getTableSN } from \"@/utils\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\n\r\ninterface Props {\r\n  [key: string]: any;\r\n}\r\nlet unmount = false;\r\nconst ArticleList: React.FC<ViewProps<Props>> = (props) => {\r\n  useEffect(() => {\r\n    unmount = false;\r\n    return () => {\r\n      unmount = true;\r\n    };\r\n  }, []);\r\n  const { className = \"\" } = props;\r\n  const [res, setRes] = useState<ResDataArticleList>({ list: [], total: 0 });\r\n  const [loading, setLoading] = useState(false);\r\n  const getList = async () => {\r\n    const _form = await form.validateFields().catch(() => undefined);\r\n    if (loading || !_form) return;\r\n    setLoading(true);\r\n    const res = await reqArticleList({ ...page, ..._form });\r\n    if (res.code != 200) return appMessage.error(res.message || \"加载数据失败！\");\r\n    if (unmount) return;\r\n    setLoading(false);\r\n    // appMessage.success(res.message || \"加载数据成功！\");//加载数据不做提示\r\n    res.data.list = res.data.list.map((item, index) => ({ ...item, sn: getTableSN(page, index) }));\r\n    setRes(res.data);\r\n  };\r\n\r\n  const [page, setPage] = useState<ReqPageData>({ current: 1, pageSize: 10 });\r\n  useEffect(() => {\r\n    getList();\r\n  }, [page]);\r\n  const [form] = Form.useForm<FormDataArticleList>();\r\n\r\n  let columns: Antd.TableColumnsType<ArticleItem> = [\r\n    { key: \"sn\", title: \"序号\", width: 100 },\r\n    { key: \"title\", title: \"标题\" },\r\n    { key: \"author\", title: \"作者\" },\r\n    {\r\n      key: \"hot\",\r\n      title: \"热度\",\r\n      render(number) {\r\n        return <HotStar number={number} />;\r\n      },\r\n    },\r\n    { key: \"dateTime\", title: \"时间\" },\r\n    { key: \"publishStatus\", title: \"发布状态\" },\r\n    {\r\n      key: \"actions\",\r\n      dataIndex: \"actions\",\r\n      title: \"操作\",\r\n      width: 300,\r\n      render(text, item) {\r\n        //text, item\r\n        return (\r\n          <Space>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={() => {\r\n                history.push(`/console/article/update?id=${item.id}`);\r\n              }}>\r\n              编辑\r\n            </Button>\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n  columns = columns.map((item) => ({ ...item, align: \"center\", dataIndex: item.key }));\r\n  //\r\n  const history = useHistory();\r\n  //render\r\n  return (\r\n    <ContentMain className={className}>\r\n      <header>\r\n        <Form layout=\"inline\" form={form}>\r\n          <Form.Item label=\"文章名称\" name=\"name\">\r\n            <AppInput placeholder=\"请输入文章名称\" />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Space>\r\n              <Button\r\n                type=\"primary\"\r\n                onClick={() => {\r\n                  if (page.current == 1) return getList();\r\n                  setPage({ ...page, current: 1 });\r\n                }}>\r\n                查询\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  form.resetFields();\r\n                  getList();\r\n                }}>\r\n                重置\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n        <nav style={{ marginTop: 10 }}>\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() => {\r\n              history.push(\"/console/article/create\");\r\n            }}>\r\n            新建文章 <PlusOutlined />\r\n          </Button>\r\n        </nav>\r\n      </header>\r\n      <AppTable\r\n        loading={loading}\r\n        dataSource={res.list}\r\n        columns={columns}\r\n        rowKey=\"id\"\r\n        style={{ marginTop: 10 }}\r\n        pagination={{\r\n          total: res.total,\r\n        }}\r\n        onChange={({ current, pageSize }) => {\r\n          setPage({ current, pageSize });\r\n        }}></AppTable>\r\n    </ContentMain>\r\n  );\r\n};\r\nexport default ArticleList;\r\n"],"sourceRoot":""}