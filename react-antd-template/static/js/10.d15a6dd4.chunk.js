(this["webpackJsonpreact-antd-template"]=this["webpackJsonpreact-antd-template"]||[]).push([[10],{316:function(e,t,a){"use strict";a(0);var r=a(6);t.a=function(e){var t=e.className,a=void 0===t?"":t;return Object(r.jsx)("main",{className:"content-main ".concat(a),children:e.children})}},324:function(e,t,a){"use strict";var r=a(17),c=a(22),n=a(387),s=a(0),i=a(6);t.a=function(e){var t=Object(s.useState)(),a=Object(c.a)(t,2),u=a[0],o=a[1];return Object(s.useEffect)((function(){e.pagination&&o(Object(r.a)(Object(r.a)({},e.pagination),{},{showQuickJumper:!0,showTotal:function(){return e.pagination&&"\u5171 ".concat(String(e.pagination.total||0)," \u6761")}}))}),[e.pagination]),Object(i.jsx)(n.a,Object(r.a)(Object(r.a)({},e),{},{pagination:u}))}},393:function(e,t,a){"use strict";a.r(t);var r=a(25),c=a.n(r),n=a(17),s=a(38),i=a(22),u=a(0),o=a(308),l=a(310),j=a(64),b=a(143),d=a(130),O=a(55),h=a(391),f=a(304),m=a(389),p=a(40),x=a(147),k=a(6),v=function(e){var t=e.className,a=void 0===t?"":t,r=e.value,c=void 0===r?{checkedKeys:[]}:r,n=e.onChange,s=Object(p.g)().routeList,o=Object(u.useState)(Object(x.a)(s)),l=Object(i.a)(o,1)[0];return Object(k.jsx)(m.a,{checkedKeys:c.checkedKeys,checkable:!0,className:a,treeData:l,onCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;n&&n({checkedKeys:e,halfCheckedKeys:t.halfCheckedKeys||[]})}})},y=function(e){var t=e.className,a=void 0===t?"":t,r=e.name,c=void 0===r?"authTree":r;return Object(k.jsx)(o.a.Item,{className:a,name:c,label:"\u6743\u9650\u5217\u8868",children:Object(k.jsx)(v,{})})},g={labelCol:{span:5},wrapperCol:{span:19}},C=function(){var e=Object(u.useRef)(!1),t=Object(u.useState)(e.current),a=Object(i.a)(t,2)[1],r=Object(u.useRef)((function(t){return Object(k.jsx)(j.a,{type:"primary",onClick:function(){a(e.current=!e.current)},children:t.children})})),l=o.a.useForm(),m=Object(i.a)(l,1)[0],p=Object(u.useRef)((function(t){var r=t.onOk,l=Object(u.useState)(!1),j=Object(i.a)(l,2),p=j[0],x=j[1];return Object(k.jsx)(h.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:e.current,confirmLoading:p,onCancel:function(){a(e.current=!1)},onOk:Object(s.a)(c.a.mark((function t(){var n,s,i,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.validateFields().catch((function(e){return e}));case 2:if((i=t.sent)&&!p){t.next=5;break}return t.abrupt("return");case 5:return x(!0),t.next=8,Object(d.f)({roleName:i.roleName,checkedKeys:(null===(n=i.authTree)||void 0===n?void 0:n.checkedKeys)||[],halfCheckedKeys:(null===(s=i.authTree)||void 0===s?void 0:s.halfCheckedKeys)||[],remark:i.remark});case 8:if(u=t.sent,x(!1),200==u.code){t.next=12;break}return t.abrupt("return",O.a.error(u.message||"\u6dfb\u52a0\u5931\u8d25\uff01"));case 12:O.a.success(u.message||"\u6dfb\u52a0\u6210\u529f\uff01"),a(e.current=!1),r&&r();case 15:case"end":return t.stop()}}),t)}))),children:Object(k.jsxs)(o.a,Object(n.a)(Object(n.a)({form:m},g),{},{children:[Object(k.jsx)(o.a.Item,{name:"roleName",label:"\u89d2\u8272\u540d\u79f0",rules:[{required:!0}],children:Object(k.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})}),Object(k.jsx)(o.a.Item,{name:"remark",label:"\u5907\u6ce8",children:Object(k.jsx)(f.a.TextArea,{placeholder:"\u6700\u591a\u8f93\u5165100\u4f4d\u5b57\u7b26",maxLength:100})}),Object(k.jsx)(y,{name:"authTree"})]}))})}));return{Button:r.current,Modal:p.current}},K=a(316),N={labelCol:{span:5},wrapperCol:{span:19}},w=function(){var e=Object(u.useRef)(!1),t=Object(u.useRef)(),a=Object(u.useState)(e.current),r=Object(i.a)(a,2)[1],l=Object(u.useRef)((function(a){return Object(k.jsx)(j.a,{type:"primary",onClick:function(){var c=a.item;r(e.current=!e.current),t.current=c,p.setFieldsValue({roleName:c.roleName,remark:c.remark,authTree:{halfCheckedKeys:c.halfCheckedKeys,checkedKeys:c.checkedKeys}})},children:a.children})})),m=o.a.useForm(),p=Object(i.a)(m,1)[0],x=Object(u.useRef)((function(a){var l=a.onOk,j=Object(u.useState)(!1),m=Object(i.a)(j,2),x=m[0],v=m[1];return Object(k.jsx)(h.a,{title:"\u7f16\u8f91\u89d2\u8272",visible:e.current,confirmLoading:x,onCancel:function(){r(e.current=!1)},onOk:Object(s.a)(c.a.mark((function a(){var n,s,i,u,o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((u=p.getFieldsValue())&&!x&&(null===(n=t.current)||void 0===n?void 0:n.id)){a.next=3;break}return a.abrupt("return");case 3:return v(!0),a.next=6,Object(d.i)({id:t.current.id,roleName:u.roleName,checkedKeys:(null===(s=u.authTree)||void 0===s?void 0:s.checkedKeys)||[],halfCheckedKeys:(null===(i=u.authTree)||void 0===i?void 0:i.halfCheckedKeys)||[],remark:u.remark});case 6:if(o=a.sent,v(!1),200==o.code){a.next=10;break}return a.abrupt("return",O.a.error(o.message||"\u66f4\u65b0\u5931\u8d25\uff01"));case 10:O.a.success(o.message||"\u66f4\u65b0\u6210\u529f\uff01"),r(e.current=!1),l&&l();case 13:case"end":return a.stop()}}),a)}))),children:Object(k.jsxs)(o.a,Object(n.a)(Object(n.a)({form:p},N),{},{children:[Object(k.jsx)(o.a.Item,{name:"roleName",label:"\u89d2\u8272\u540d\u79f0",rules:[{required:!0}],children:Object(k.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})}),Object(k.jsx)(o.a.Item,{name:"remark",label:"\u5907\u6ce8",children:Object(k.jsx)(f.a.TextArea,{placeholder:"\u6700\u591a\u8f93\u5165100\u4f4d\u5b57\u7b26",maxLength:100})}),Object(k.jsx)(y,{name:"authTree"})]}))})}));return{Button:l.current,Modal:x.current}},S=a(324),T=a(96),I=!1;t.default=function(e){Object(u.useEffect)((function(){return I=!1,function(){I=!0}}),[]);var t=e.className,a=void 0===t?"":t,r=Object(u.useState)({list:[],total:0}),h=Object(i.a)(r,2),f=h[0],m=h[1],p=Object(u.useState)(!1),x=Object(i.a)(p,2),v=x[0],y=x[1],g=function(){var e=Object(s.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.validateFields().catch((function(){}));case 2:if(t=e.sent,!v&&t){e.next=5;break}return e.abrupt("return");case 5:return y(!0),e.next=8,Object(d.g)(Object(n.a)(Object(n.a)({},R),t));case 8:if(a=e.sent,!I){e.next=11;break}return e.abrupt("return");case 11:if(y(!1),200==a.code){e.next=14;break}return e.abrupt("return",O.a.error(a.message||"\u52a0\u8f7d\u6570\u636e\u5931\u8d25\uff01"));case 14:a.data.list=a.data.list.map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{sn:Object(T.b)(R,t)})})),m({list:a.data.list,total:a.data.total});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=Object(u.useState)({current:1,pageSize:10}),F=Object(i.a)(N,2),R=F[0],L=F[1];Object(u.useEffect)((function(){g()}),[R]);var B=o.a.useForm(),M=Object(i.a)(B,1)[0],z=C(),E=w(),J=[{key:"sn",title:"\u5e8f\u53f7",width:100},{key:"roleName",title:"\u89d2\u8272\u540d\u79f0"},{key:"remark",title:"\u5907\u6ce8"},{key:"actions",dataIndex:"actions",title:"\u64cd\u4f5c",width:300,render:function(e,t){return Object(k.jsx)(l.b,{children:Object(k.jsx)(E.Button,{item:t,children:"\u7f16\u8f91"})})}}];return J=J.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{align:"center",dataIndex:e.key})})),Object(k.jsxs)(K.a,{className:a,children:[Object(k.jsxs)("header",{children:[Object(k.jsxs)(o.a,{layout:"inline",form:M,children:[Object(k.jsx)(o.a.Item,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",children:Object(k.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})}),Object(k.jsx)(o.a.Item,{children:Object(k.jsxs)(l.b,{children:[Object(k.jsx)(j.a,{type:"primary",onClick:function(){if(1==R.current)return g();L(Object(n.a)(Object(n.a)({},R),{},{current:1}))},children:"\u67e5\u8be2"}),Object(k.jsx)(j.a,{onClick:function(){M.resetFields(),g()},children:"\u91cd\u7f6e"})]})})]}),Object(k.jsx)("nav",{style:{marginTop:10},children:Object(k.jsx)(z.Button,{children:"\u6dfb\u52a0\u89d2\u8272"})})]}),Object(k.jsx)(S.a,{dataSource:f.list,columns:J,rowKey:"id",style:{marginTop:10},loading:v,pagination:{total:f.total},onChange:function(e){var t=e.current,a=e.pageSize;L({current:t,pageSize:a})}}),Object(k.jsx)(z.Modal,{onOk:function(){g()}}),Object(k.jsx)(E.Modal,{onOk:function(){g()}})]})}}}]);
//# sourceMappingURL=10.d15a6dd4.chunk.js.map