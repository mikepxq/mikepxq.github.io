(this["webpackJsonpreact-antd-template"]=this["webpackJsonpreact-antd-template"]||[]).push([[12],{317:function(e,a,t){"use strict";t(0);var r=t(4);a.a=function(e){var a=e.className,t=void 0===a?"":a;return Object(r.jsx)("main",{className:"content-main ".concat(t),children:e.children})}},333:function(e,a,t){"use strict";t(0);var r=t(372),c=t(66),n=t(312),s=t(310),i=t(336),l=t(337),u=t(305),b=t(82),o=t(144),j=t(4),d=r.a.Panel;a.a=function(e){var a=e.className,t=void 0===a?"":a,p=e.onPublish,h=e.onDraft,O=e.form,f=e.draftLoading,m=e.publishLoading,x=e.collapseIsOpen,g=void 0===x||x,v=e.onChangeCollapse;return Object(j.jsx)(r.a,{className:"article-collapse-form ".concat(t),activeKey:[String(g)],children:Object(j.jsxs)(d,{showArrow:!1,header:Object(j.jsxs)("nav",{className:"clear",children:[Object(j.jsxs)(c.a,{type:"primary",onClick:function(){v&&v(!g)},children:["\u914d\u7f6e",Object(j.jsx)(b.a,{className:"arrow",style:{transform:"rotate(".concat(g?90:0,"deg)")}})]}),Object(j.jsxs)(n.b,{className:"fr",children:[Object(j.jsx)(c.a,{onClick:p,type:"primary",loading:m,children:"\u53d1\u5e03"}),Object(j.jsx)(c.a,{onClick:h,loading:f,children:"\u8349\u7a3f"})]})]}),children:[Object(j.jsx)(s.a,{form:O,labelCol:{span:5},wrapperCol:{span:19},children:Object(j.jsxs)(i.a,{gutter:24,children:[Object(j.jsx)(l.a,{span:8,children:Object(j.jsx)(s.a.Item,{name:"title",label:"\u6807\u9898",rules:[{required:!0}],children:Object(j.jsx)(o.a,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"})})}),Object(j.jsx)(l.a,{span:8,children:Object(j.jsx)(s.a.Item,{name:"author",label:"\u4f5c\u8005",rules:[{required:!0}],children:Object(j.jsx)(o.a,{placeholder:"\u8bf7\u8f93\u5165\u4f5c\u8005"})})}),Object(j.jsx)(l.a,{span:8,children:Object(j.jsx)(s.a.Item,{name:"description",label:"\u63cf\u8ff0",children:Object(j.jsx)(u.a.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",maxLength:100})})})]})}),Object(j.jsx)("footer",{className:"clear",children:Object(j.jsx)(c.a,{className:"fr",onClick:function(){O.resetFields()},children:"\u91cd\u7f6e"})})]},"true")})}},385:function(e,a,t){"use strict";t.r(a);var r=t(25),c=t.n(r),n=t(58),s=t(9),i=t(38),l=t(22),u=t(310),b=t(0),o=t.n(b),j=(t(340),t(341)),d=t(317),p=t(333),h=t(131),O=t(57),f=t(149),m=t(4);a.default=function(e){var a=e.className,t=void 0===a?"":a,r=o.a.createRef(),x=Object(b.useState)({draft:!1,publish:!1}),g=Object(l.a)(x,2),v=g[0],k=g[1],w=Object(b.useState)(),S=Object(l.a)(w,2),N=S[0],y=S[1],C=function(){var e=Object(i.a)(c.a.mark((function e(a){var t,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.validateFields().catch((function(){}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",A(!0));case 5:if(!v[a.publishStatus]&&r.current){e.next=7;break}return e.abrupt("return");case 7:return i=r.current.getInstance(),k(Object(s.a)(Object(s.a)({},v),{},Object(n.a)({},a.publishStatus,!0))),e.next=11,Object(h.a)(Object(s.a)(Object(s.a)(Object(s.a)({},a),t),{},{markdown:i.getMarkdown()}));case 11:if(l=e.sent,k(Object(s.a)(Object(s.a)({},v),{},Object(n.a)({},a.publishStatus,!1))),200==l.code){e.next=15;break}return e.abrupt("return",O.b.error({message:l.message||"\u6dfb\u52a0\u5931\u8d25\uff01"}));case 15:O.b.success({message:l.message||"\u6dfb\u52a0\u6210\u529f\uff01"}),y(l.data.id);case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(c.a.mark((function e(a){var t,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.validateFields().catch((function(){}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",A(!0));case 5:if(!v[a.publishStatus]&&r.current&&void 0!==N){e.next=7;break}return e.abrupt("return");case 7:return i=r.current.getInstance(),k(Object(s.a)(Object(s.a)({},v),{},Object(n.a)({},a.publishStatus,!0))),e.next=11,Object(h.d)(Object(s.a)(Object(s.a)(Object(s.a)({id:N},a),t),{},{markdown:i.getMarkdown()}));case 11:if(l=e.sent,k(Object(s.a)(Object(s.a)({},v),{},Object(n.a)({},a.publishStatus,!1))),200==l.code){e.next=15;break}return e.abrupt("return",O.b.error({message:l.message||"\u66f4\u65b0\u5931\u8d25\uff01"}));case 15:O.b.success({message:l.message||"\u66f4\u65b0\u6210\u529f\uff01"});case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),L=u.a.useForm(),F=Object(l.a)(L,1)[0],P=Object(b.useState)(!0),T=Object(l.a)(P,2),q=T[0],A=T[1];return Object(m.jsxs)(d.a,{className:"".concat(t," flex-column"),children:[Object(m.jsx)(p.a,{collapseIsOpen:q,onChangeCollapse:A,form:F,onDraft:function(){if(void 0===N)return C({publishStatus:"draft"});I({publishStatus:"draft"})},draftLoading:v.draft,publishLoading:v.publish,onPublish:function(){if(void 0===N)return C({publishStatus:"publish"});I({publishStatus:"publish"})}}),Object(m.jsx)("main",{className:"all-remain",style:{marginTop:10},children:Object(m.jsx)(j.a,{initialValue:f.a,previewStyle:"vertical",initialEditType:"markdown",ref:r,height:"100%"})})]})}}}]);
//# sourceMappingURL=12.3443f721.chunk.js.map